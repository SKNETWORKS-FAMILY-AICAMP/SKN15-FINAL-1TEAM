{% extends "base.html" %}
{% block title %}로그인{% endblock %}

{% block content %}
<section class="dl-hero">
  <p class="eyebrow">TEAM HINTON</p>
  <h1 class="headline">다시 <span class="accent">로그인</span>하세요</h1>
  <p class="subhead">로그인 후 확장프로그램과 캘린더를 사용할 수 있어요.</p>
</section>

<section class="container">
  <article class="card auth-card">
    <form method="post" novalidate>
      {% csrf_token %}
      <input type="hidden" name="next" value="{{ next }}">

      {% if form.non_field_errors %}
        <div class="form-error">{{ form.non_field_errors }}</div>
      {% endif %}

      <div class="form-row">
        <label class="form-label" for="{{ form.username.id_for_label }}">아이디</label>
        {{ form.username }}
        {% if form.username.errors %}
          <div class="form-error">{{ form.username.errors|join:", " }}</div>
        {% endif %}
      </div>

      <div class="form-row">
        <label class="form-label" for="{{ form.password.id_for_label }}">비밀번호</label>
        <div class="input-group">
          {{ form.password }}
          <button type="button" class="eye" data-target="{{ form.password.id_for_label }}">보기</button>
        </div>
        {% if form.password.errors %}
          <div class="form-error">{{ form.password.errors|join:", " }}</div>
        {% endif %}
      </div>

      <div class="form-actions">
        <a class="btn ghost" href="{% url 'signup' %}?next={{ next|urlencode }}">계정이 없나요? 회원가입</a>
        <button class="btn primary">로그인</button>
      </div>
    </form>
  </article>
</section>
{% endblock %}

{% block scripts %}
<script>
  // 비밀번호 보기 토글
  document.querySelectorAll('.eye').forEach(btn => {
    btn.addEventListener('click', () => {
      const id = btn.getAttribute('data-target');
      const input = document.getElementById(id);
      if (!input) return;
      input.type = input.type === 'password' ? 'text' : 'password';
      btn.textContent = input.type === 'password' ? '보기' : '숨김';
    });
  });
</script>
{% endblock %}
